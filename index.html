<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    .event-calc-wrapper {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        max-width: 600px;
        margin: 20px auto;
        padding: 30px;
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
    }
    .event-calc-header {
        text-align: center;
        margin-bottom: 25px;
    }
    .event-calc-header h3 {
        margin: 0 0 10px 0;
        color: #333;
        font-size: 24px;
    }
    .event-calc-header p {
        margin: 0;
        color: #666;
        font-size: 14px;
    }
    .calc-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f0f0f0;
    }
    .calc-row:last-child {
        border-bottom: none;
    }
    .calc-label {
        flex: 1;
        font-size: 15px;
        color: #444;
        padding-right: 15px;
    }
    .calc-input-group {
        width: 120px;
        position: relative;
    }
    .calc-input {
        width: 100%;
        padding: 8px 10px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        text-align: right;
        box-sizing: border-box;
    }
    .calc-input:focus {
        border-color: #007bff;
        outline: none;
    }
    .calc-suffix {
        position: absolute;
        right: 25px;
        top: 50%;
        transform: translateY(-50%);
        color: #999;
        font-size: 12px;
        pointer-events: none;
        display: none; /* Скрыто по умолчанию */
    }
    
    /* Секция результатов */
    .calc-results {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
    }
    .result-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 14px;
    }
    .result-row.main {
        font-weight: bold;
        color: #000;
        font-size: 18px;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 2px solid #ddd;
    }
    .result-value {
        font-weight: 600;
    }
    .btn-calculate {
        width: 100%;
        padding: 15px;
        background-color: #ff4a4a; /* Цвет из вашего PDF */
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
        margin-top: 10px;
    }
    .btn-calculate:hover {
        background-color: #e03e3e;
    }
    .note {
        font-size: 12px;
        color: #888;
        margin-top: 10px;
        text-align: center;
    }
</style>
</head>
<body>

<div class="event-calc-wrapper">
    <div class="event-calc-header">
        <h3>Бюджет Event-маркетинга</h3>
        <p>Расчет от желаемого количества участников</p>
    </div>

    <div class="calc-row">
        <div class="calc-label"><strong>1. Желаемое кол-во участников</strong><br><span style="font-size:12px;color:#888;">(Desired Attendance)</span></div>
        <div class="calc-input-group">
            <input type="number" id="desired_attendees" class="calc-input" value="100">
        </div>
    </div>

    <div class="calc-row">
        <div class="calc-label">2. Доходимость до ивента<br><span style="font-size:12px;color:#888;">(Show-up Rate / Visiting)</span></div>
        <div class="calc-input-group">
            <input type="number" id="cr_visiting" class="calc-input" value="50" step="1">
        </div>
    </div>

    <div class="calc-row">
        <div class="calc-label">3. Заполняемость формы регистрации<br><span style="font-size:12px;color:#888;">(Conversion Rate: Form)</span></div>
        <div class="calc-input-group">
            <input type="number" id="cr_form" class="calc-input" value="70" step="1">
        </div>
    </div>

    <div class="calc-row">
        <div class="calc-label">4. Клики на кнопку "Регистрация"<br><span style="font-size:12px;color:#888;">(Conversion Rate: Website)</span></div>
        <div class="calc-input-group">
            <input type="number" id="cr_website" class="calc-input" value="20" step="1">
        </div>
    </div>

    <div class="calc-row">
        <div class="calc-label">5. Цена за клик (CPC)<br><span style="font-size:12px;color:#888;">(Cost Per Click)</span></div>
        <div class="calc-input-group">
            <input type="number" id="cpc" class="calc-input" value="0.20" step="0.01">
        </div>
    </div>

    <div class="calc-row">
        <div class="calc-label">6. CTR рекламы<br><span style="font-size:12px;color:#888;">(Click Through Rate)</span></div>
        <div class="calc-input-group">
            <input type="number" id="ctr" class="calc-input" value="5" step="0.1">
        </div>
    </div>

    <button class="btn-calculate" onclick="calculateEventBudget()">Рассчитать бюджет</button>

    <div class="calc-results" id="results_box" style="display:none;">
        <div class="result-row">
            <span>Нужно регистраций (Leads):</span>
            <span class="result-value" id="res_registrations">-</span>
        </div>
        <div class="result-row">
            <span>Открытий формы (Form Visitors):</span>
            <span class="result-value" id="res_form_visitors">-</span>
        </div>
        <div class="result-row">
            <span>Посетителей сайта (Website Visitors):</span>
            <span class="result-value" id="res_site_visitors">-</span>
        </div>
        <div class="result-row">
            <span>Охват рекламы (Impressions):</span>
            <span class="result-value" id="res_impressions">-</span>
        </div>
        <div class="result-row main">
            <span>Необходимый бюджет:</span>
            <span class="result-value" id="res_budget" style="color:#ff4a4a;">-</span>
        </div>
    </div>
    
    <div class="note">Значения по умолчанию взяты из методички "Event Marketing on Social Media"</div>
</div>

<script>
    function calculateEventBudget() {
        // 1. Получение входных данных
        let attendees = parseFloat(document.getElementById('desired_attendees').value);
        let cr_visiting = parseFloat(document.getElementById('cr_visiting').value) / 100;
        let cr_form = parseFloat(document.getElementById('cr_form').value) / 100;
        let cr_website = parseFloat(document.getElementById('cr_website').value) / 100;
        let cpc = parseFloat(document.getElementById('cpc').value);
        let ctr = parseFloat(document.getElementById('ctr').value) / 100;

        if (!attendees || attendees <= 0) {
            alert("Пожалуйста, введите желаемое количество участников.");
            return;
        }

        // 2. Логика расчета (Reverse Funnel)
        
        // Шаг 1: Сколько нужно регистраций? (Attendees / Show-up Rate)
        // Источник: PDF Page 3 [cite: 67, 68]
        let registrations = attendees / cr_visiting;

        // Шаг 2: Сколько людей должны открыть форму? (Registrations / Form Conversion)
        // Источник: PDF Page 4 
        let form_visitors = registrations / cr_form;

        // Шаг 3: Сколько посетителей сайта нужно? (Form Visitors / Website Button Click Rate)
        // Источник: PDF Page 4 [cite: 93, 97]
        let site_visitors = form_visitors / cr_website;

        // Шаг 4: Бюджет (Site Visitors * CPC)
        // В PDF подразумевается, что "посетитель" = "платный клик".
        // Источник: PDF Page 5 
        let budget = site_visitors * cpc;

        // Дополнительно: Охват (Impressions = Clicks / CTR)
        // Источник: PDF Page 5 [cite: 110, 116]
        let impressions = site_visitors / ctr;

        // 3. Вывод результатов (с округлением в большую сторону, т.к. нельзя привести полчеловека)
        document.getElementById('res_registrations').innerText = Math.ceil(registrations).toLocaleString();
        document.getElementById('res_form_visitors').innerText = Math.ceil(form_visitors).toLocaleString();
        document.getElementById('res_site_visitors').innerText = Math.ceil(site_visitors).toLocaleString();
        document.getElementById('res_impressions').innerText = Math.ceil(impressions).toLocaleString();
        
        // Форматирование бюджета
        document.getElementById('res_budget').innerText = Math.ceil(budget).toLocaleString() + ' у.е.';

        // Показать блок результатов
        document.getElementById('results_box').style.display = 'block';
    }
</script>

</body>
</html>
